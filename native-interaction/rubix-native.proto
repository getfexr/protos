syntax = "proto3";

package protos;

option go_package = "github.com/getfexr/protos";

message CreateDIDReq {
  string didImage = 1;
  string publicShare = 2;
}

message CreateDIDRes {
  string did = 1;
  string walletId = 2;
}

message RequestTransactionPayloadReq {
  string receiver = 1;
  double tokenCount = 2;
  string comment = 3;
  int32 type = 4;
}

message TxnSummary {
  string txnId = 1;
  string sender = 2;
  string receiver = 3;
  double amount = 4;
  string comment = 5;
}

message RequestTransactionPayloadRes {
  message TxnSignPayload {
    string senderSign = 1;
    string senderSignQ = 2;
    string txnDetails = 3;
  }

  string did = 1;
  string tid = 2;
  TxnSignPayload payload = 3;
  TxnSummary txnSummary = 4;
}

message InitiateTransactionReq {
  message SignedTransactionPayload {
    message SignedContent {
      string content = 1;
      string signature = 2;
    }

    string positions = 1;
    SignedContent senderSign = 2;
    SignedContent senderSignQ = 3;
    string txnDetails = 4;
  }

  string receiver = 1;
  double tokenCount = 2;
  int32 type = 3;
  SignedTransactionPayload payloadSigned = 4;
}

message InitiateTransactionRes {
  bool success = 1;
  string message = 2;
  string transactionId = 3;
}

service RubixService {
  rpc CreateDID (CreateDIDReq) returns (CreateDIDRes) {}

  rpc RequestTransactionPayload (RequestTransactionPayloadReq) returns (RequestTransactionPayloadRes) {}
  rpc InitiateTransaction (InitiateTransactionReq) returns (InitiateTransactionRes) {}
}
